# 16

LCR 134. Pow(x, n)

## 题目描述

实现 pow(x, n)  
即计算x的n次幂函数  

限制范围：  
$-100.0 < x < 100.0$  
$-231 <= n <= 231-1$  
$-104 <= x^n <= 104$  

底层补充：  
python中float直接对应C中的double（双精度浮点数）  
遵循IEEE 754标准  

如果要不损失精度的处理  
可以选择：  

1. decimal  
2. fraction

## 实现思路

简单暴力直接算  
时间复杂度O(n)  

快速幂  
基于分治算法（或者从二进制角度理解）  
时间复杂度O(logn)  

理解：  
假设求 $x^n$  
将其看作 $(x^{n/2})^2$  
此处需要考虑n的奇偶性  

实际公式为  

$$
x^n = \begin{cases}
(x^{n/2})^2 & n \text{为偶数} \\
(x^{(n-1)/2})^2 \cdot x & n \text{为奇数}
\end{cases}
$$

最终得到公式实际上是类似于  

$$
x^n = ... \cdot x^{b_2 \cdot 4} \cdot x^{b_1 \cdot 2} \cdot x^{b_0 \cdot 1}
$$

其中 $b_i$ 是n的二进制表示的第i位  

## 代码实现

```python
class Solution:
    def myPow(self, x: float, n: int) -> float:
        res = 1
        if n < 0:
            n = -n
            x = x ** -1
        
        while n:
            if n % 2: res *= x
            x = x ** 2
            n //= 2
        
        return res
```
